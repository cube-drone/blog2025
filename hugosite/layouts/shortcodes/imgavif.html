{{ $ctx := . }}
{{ $img := .Page.Resources.GetMatch (.Get "src") }}
{{ with $img }}
  {{ $webp := .Resize (print "800x webp q98") }}
  <img src="{{ $webp.RelPermalink }}" alt="{{ $ctx.Get "alt" | default "" }}" loading="lazy">
{{ else }}
  <strong>⚠️ Image not found: {{ .Get "src" }} </strong>
  <p> You might want: </p>
  <ul>
    {{ range .Page.Resources }}
    <li>{{ .Name }}</li>
    {{ end }}
  </ul>
{{ end }}
